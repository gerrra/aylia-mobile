# üìã –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## üéØ –û–±–∑–æ—Ä

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫:

1. **–õ–æ–≥–≥–µ—Ä** (`src/lib/logger.ts`) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **API-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
3. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫** - –ø–µ—Ä–µ—Ö–≤–∞—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
4. **–≠–∫—Ä–∞–Ω Health** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è API

## üîß –õ–æ–≥–≥–µ—Ä

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
import { logger } from '@/src/lib/logger';

// –†–∞–∑–ª–∏—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logger.debug('–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è');
logger.info('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ');
logger.warn('–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ');
logger.error('–û—à–∏–±–∫–∞');

// –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
logger.info('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª', {
  userId: '12345',
  timestamp: new Date().toISOString(),
});
```

### **–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

| –£—Ä–æ–≤–µ–Ω—å | Development | Production | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ            |
| ------- | ----------- | ---------- | --------------------- |
| `debug` | ‚úÖ –í–∏–¥–Ω–æ    | ‚ùå –°–∫—Ä—ã—Ç–æ  | –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |
| `info`  | ‚úÖ –í–∏–¥–Ω–æ    | ‚ùå –°–∫—Ä—ã—Ç–æ  | –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è      |
| `warn`  | ‚úÖ –í–∏–¥–Ω–æ    | ‚úÖ –í–∏–¥–Ω–æ   | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è        |
| `error` | ‚úÖ –í–∏–¥–Ω–æ    | ‚úÖ –í–∏–¥–Ω–æ   | –û—à–∏–±–∫–∏                |

## üåê API-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:
logger.debug('API Request: GET https://api.aylia.ai/health', {
  body: undefined,
  headers: { 'Content-Type': 'application/json' },
});

// –ü—Ä–∏ —É—Å–ø–µ—Ö–µ:
logger.debug('API Success: GET https://api.aylia.ai/health', {
  data: { ok: true },
});

// –ü—Ä–∏ –æ—à–∏–±–∫–µ:
logger.error('API Error: GET https://api.aylia.ai/health', {
  status: 404,
  statusText: 'Not Found',
  body: 'Not Found',
});
```

## ‚ö†Ô∏è –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫

–ù–∞—Å—Ç—Ä–æ–µ–Ω –≤ `app/_layout.tsx` –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫:

```typescript
// –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç:
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (throw new Error())
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (setTimeout(() => throw new Error()))
- –û—à–∏–±–∫–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö React
- –û—à–∏–±–∫–∏ –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º –∫–æ–¥–µ
```

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ:**

1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ `logger.error()`
2. **Console.error** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. **–í—ã–∑–æ–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞** (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

## üè• –≠–∫—Ä–∞–Ω Health

–≠–∫—Ä–∞–Ω `app/(tabs)/health.tsx` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ API:**

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ `/health` —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫:**

- üî¥ –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ—à–∏–±–∫–∏
- üî¥ –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ—à–∏–±–∫–∏
- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∞

### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

- üìä –û–∫—Ä—É–∂–µ–Ω–∏–µ (preview/production)
- üîó URL API
- üì± –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìä –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

–í—Å–µ –ª–æ–≥–∏ –∏–º–µ—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:

```
[2024-01-15T10:30:45.123Z] [INFO] Home screen mounted { env: 'preview', apiUrl: 'https://api.dev.aylia.ai' }
[2024-01-15T10:30:45.456Z] [DEBUG] API Request: GET https://api.dev.aylia.ai/health { body: undefined }
[2024-01-15T10:30:45.789Z] [ERROR] API Error: GET https://api.dev.aylia.ai/health { status: 404, statusText: 'Not Found' }
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry:**

```typescript
// –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
import * as Sentry from '@sentry/react-native';

// –í –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ:
Sentry.captureException(error, {
  tags: { isFatal },
  extra: { timestamp: new Date().toISOString() },
});
```

### **–û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**

```typescript
// –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫:
if (level === 'error') {
  await sendToServer({ level, message, extra, timestamp });
}
```

### **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤:**

```typescript
// –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥–∏ –≤ AsyncStorage:
import AsyncStorage from '@react-native-async-storage/async-storage';

const saveLog = async (log) => {
  const logs = (await AsyncStorage.getItem('app_logs')) || '[]';
  const parsed = JSON.parse(logs);
  parsed.push(log);
  await AsyncStorage.setItem('app_logs', JSON.stringify(parsed.slice(-100))); // –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100
};
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–ß—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:**

- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–ª–æ–≥–∏–Ω, –ø–æ–∫—É–ø–∫–∏)
- ‚úÖ API-–∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### **–ß—Ç–æ –ù–ï –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:**

- ‚ùå –ü–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã
- ‚ùå –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚ùå –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ —Å–æ–±—ã—Ç–∏—è (–∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä)

### **–í production:**

- üîá –û—Ç–∫–ª—é—á–∏—Ç—å debug/info –ª–æ–≥–∏
- üìä –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –æ—à–∏–±–æ–∫ –≤ Sentry
- üìà –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîó –°—Å—ã–ª–∫–∏

- [React Native Error Handling](https://reactnative.dev/docs/error-handling)
- [Sentry React Native](https://docs.sentry.io/platforms/react-native/)
- [AsyncStorage](https://react-native-async-storage.github.io/async-storage/)
